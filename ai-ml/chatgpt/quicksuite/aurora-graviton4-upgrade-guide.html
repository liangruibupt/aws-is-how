<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora MySQL Graviton4 å‡çº§æŒ‡å—</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #232F3E;
            border-bottom: 3px solid #FF9900;
            padding-bottom: 10px;
        }
        h2 {
            color: #232F3E;
            background: #f8f9fa;
            padding: 10px;
            border-left: 4px solid #FF9900;
        }
        h3 {
            color: #0073bb;
        }
        .recommendation-box {
            background: #e8f4fd;
            border: 1px solid #0073bb;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .success-box {
            background: #d4edda;
            border: 1px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #232F3E;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 10px 0;
        }
        .flowchart {
            text-align: center;
            margin: 20px 0;
        }
        .flow-box {
            display: inline-block;
            background: #e8f4fd;
            border: 2px solid #0073bb;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            min-width: 150px;
        }
        .flow-arrow {
            font-size: 20px;
            color: #0073bb;
            margin: 0 10px;
        }
        .phase {
            background: #232F3E;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Aurora MySQL Graviton4 å‡çº§æŒ‡å—</h1>
        
        <div class="recommendation-box">
            <h3>ğŸ“‹ å½“å‰é›†ç¾¤é…ç½®åˆ†æ</h3>
            <ul>
                <li><strong>å®ä¾‹é…ç½®ï¼š</strong>db.r6.2xlarge, db.r7.2xlarge, db.r8.4xlarge</li>
                <li><strong>MySQLç‰ˆæœ¬ï¼š</strong>MySQL 8.0</li>
                <li><strong>å‡çº§ç›®æ ‡ï¼š</strong>Graviton4 (db.r8gç³»åˆ—)</li>
            </ul>
        </div>

        <h2>ğŸ¯ æ¨èçš„Aurora LTSç‰ˆæœ¬</h2>
        
        <div class="success-box">
            <h3>âœ… æ¨èç‰ˆæœ¬</h3>
            <p><strong>Aurora MySQL 8.0.mysql_aurora.3.07.1 (LTS)</strong></p>
            <ul>
                <li>å®Œå…¨æ”¯æŒGraviton4å¤„ç†å™¨</li>
                <li>é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œç¨³å®šæ€§é«˜</li>
                <li>æ€§èƒ½ä¼˜åŒ–ï¼Œå…¼å®¹æ€§å¥½</li>
            </ul>
        </div>

        <h2>ğŸ”„ å®ä¾‹ç±»å‹æ˜ å°„</h2>
        
        <table>
            <thead>
                <tr>
                    <th>å½“å‰å®ä¾‹ç±»å‹</th>
                    <th>æ¨èGraviton4å®ä¾‹</th>
                    <th>vCPU</th>
                    <th>å†…å­˜(GiB)</th>
                    <th>æ€§èƒ½æå‡</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>db.r6.2xlarge</td>
                    <td>db.r8g.2xlarge</td>
                    <td>8</td>
                    <td>64</td>
                    <td>~20%</td>
                </tr>
                <tr>
                    <td>db.r7.2xlarge</td>
                    <td>db.r8g.2xlarge</td>
                    <td>8</td>
                    <td>64</td>
                    <td>~15%</td>
                </tr>
                <tr>
                    <td>db.r8.4xlarge</td>
                    <td>db.r8g.4xlarge</td>
                    <td>16</td>
                    <td>128</td>
                    <td>~25%</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ“Š è“ç»¿éƒ¨ç½²å‡çº§æµç¨‹å›¾</h2>
        
        <div class="flowchart">
            <div class="phase">é˜¶æ®µ1: å‡†å¤‡å·¥ä½œ</div><br>
            <div class="flow-box">å¤‡ä»½éªŒè¯</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">æ€§èƒ½åŸºçº¿</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">å…¼å®¹æ€§æ£€æŸ¥</div>
            <br><br>
            
            <div class="phase">é˜¶æ®µ2: è“ç»¿ç¯å¢ƒåˆ›å»º</div><br>
            <div class="flow-box">åˆ›å»ºè“ç»¿é›†ç¾¤</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">æ•°æ®åŒæ­¥</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">é…ç½®éªŒè¯</div>
            <br><br>
            
            <div class="phase">é˜¶æ®µ3: æµ‹è¯•éªŒè¯</div><br>
            <div class="flow-box">åŠŸèƒ½æµ‹è¯•</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">æ€§èƒ½æµ‹è¯•</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">å‹åŠ›æµ‹è¯•</div>
            <br><br>
            
            <div class="phase">é˜¶æ®µ4: åˆ‡æ¢éƒ¨ç½²</div><br>
            <div class="flow-box">æµé‡åˆ‡æ¢</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">ç›‘æ§éªŒè¯</div>
            <span class="flow-arrow">â†’</span>
            <div class="flow-box">å›æ»šå‡†å¤‡</div>
        </div>

        <h2>ğŸ“ è¯¦ç»†å‡çº§æ­¥éª¤</h2>

        <div class="step">
            <h3>æ­¥éª¤1: å‡†å¤‡å·¥ä½œ</h3>
            
            <h4>1.1 åˆ›å»ºé›†ç¾¤å¿«ç…§</h4>
            <div class="code-block">
aws rds create-db-cluster-snapshot \
    --db-cluster-identifier your-aurora-cluster \
    --db-cluster-snapshot-identifier pre-graviton4-upgrade-$(date +%Y%m%d)
            </div>

            <h4>1.2 æ”¶é›†æ€§èƒ½åŸºçº¿</h4>
            <div class="code-block">
# æ”¶é›†å…³é”®æ€§èƒ½æŒ‡æ ‡
aws cloudwatch get-metric-statistics \
    --namespace AWS/RDS \
    --metric-name CPUUtilization \
    --dimensions Name=DBClusterIdentifier,Value=your-aurora-cluster \
    --start-time 2025-10-25T00:00:00Z \
    --end-time 2025-11-01T00:00:00Z \
    --period 3600 \
    --statistics Average,Maximum
            </div>

            <h4>1.3 æ£€æŸ¥åº”ç”¨å…¼å®¹æ€§</h4>
            <ul>
                <li>éªŒè¯åº”ç”¨ç¨‹åºä¸Graviton4çš„å…¼å®¹æ€§</li>
                <li>æ£€æŸ¥ç¬¬ä¸‰æ–¹å·¥å…·å’Œé©±åŠ¨ç¨‹åº</li>
                <li>ç¡®è®¤ç›‘æ§å·¥å…·æ”¯æŒ</li>
            </ul>
        </div>

        <div class="step">
            <h3>æ­¥éª¤2: åˆ›å»ºè“ç»¿ç¯å¢ƒ</h3>
            
            <h4>2.1 ä»å¿«ç…§åˆ›å»ºæ–°é›†ç¾¤</h4>
            <div class="code-block">
aws rds restore-db-cluster-from-snapshot \
    --db-cluster-identifier aurora-graviton4-green \
    --snapshot-identifier pre-graviton4-upgrade-20251101 \
    --engine aurora-mysql \
    --engine-version 8.0.mysql_aurora.3.07.1
            </div>

            <h4>2.2 æ·»åŠ Graviton4å®ä¾‹</h4>
            <div class="code-block">
# æ·»åŠ Writerå®ä¾‹
aws rds create-db-instance \
    --db-instance-identifier aurora-graviton4-writer \
    --db-cluster-identifier aurora-graviton4-green \
    --db-instance-class db.r8g.2xlarge \
    --engine aurora-mysql

# æ·»åŠ Readerå®ä¾‹
aws rds create-db-instance \
    --db-instance-identifier aurora-graviton4-reader-1 \
    --db-cluster-identifier aurora-graviton4-green \
    --db-instance-class db.r8g.2xlarge \
    --engine aurora-mysql

aws rds create-db-instance \
    --db-instance-identifier aurora-graviton4-reader-2 \
    --db-cluster-identifier aurora-graviton4-green \
    --db-instance-class db.r8g.4xlarge \
    --engine aurora-mysql
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤3: æµ‹è¯•éªŒè¯</h3>
            
            <h4>3.1 åŠŸèƒ½æµ‹è¯•æ¸…å•</h4>
            <table>
                <thead>
                    <tr>
                        <th>æµ‹è¯•é¡¹ç›®</th>
                        <th>æµ‹è¯•å†…å®¹</th>
                        <th>é¢„æœŸç»“æœ</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>è¿æ¥æµ‹è¯•</td>
                        <td>åº”ç”¨ç¨‹åºè¿æ¥éªŒè¯</td>
                        <td>æ­£å¸¸è¿æ¥</td>
                        <td>â–¡</td>
                    </tr>
                    <tr>
                        <td>è¯»å†™æµ‹è¯•</td>
                        <td>åŸºæœ¬CRUDæ“ä½œ</td>
                        <td>æ“ä½œæˆåŠŸ</td>
                        <td>â–¡</td>
                    </tr>
                    <tr>
                        <td>äº‹åŠ¡æµ‹è¯•</td>
                        <td>å¤æ‚äº‹åŠ¡å¤„ç†</td>
                        <td>äº‹åŠ¡å®Œæ•´æ€§</td>
                        <td>â–¡</td>
                    </tr>
                    <tr>
                        <td>å­˜å‚¨è¿‡ç¨‹</td>
                        <td>è‡ªå®šä¹‰å­˜å‚¨è¿‡ç¨‹</td>
                        <td>æ‰§è¡Œæ­£å¸¸</td>
                        <td>â–¡</td>
                    </tr>
                </tbody>
            </table>

            <h4>3.2 æ€§èƒ½æµ‹è¯•è„šæœ¬</h4>
            <div class="code-block">
# ä½¿ç”¨sysbenchè¿›è¡Œæ€§èƒ½æµ‹è¯•
sysbench oltp_read_write \
    --mysql-host=aurora-graviton4-green.cluster-xxx.rds.amazonaws.com \
    --mysql-user=testuser \
    --mysql-password=password \
    --mysql-db=testdb \
    --tables=10 \
    --table-size=100000 \
    --threads=16 \
    --time=300 \
    --report-interval=10 \
    run
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤4: æµé‡åˆ‡æ¢</h3>
            
            <h4>4.1 DNSåˆ‡æ¢ç­–ç•¥</h4>
            <div class="warning-box">
                <strong>âš ï¸ æ³¨æ„ï¼š</strong>å»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œåˆ‡æ¢ï¼Œå¹¶å‡†å¤‡å›æ»šæ–¹æ¡ˆ
            </div>
            
            <div class="code-block">
# æ›´æ–°åº”ç”¨ç¨‹åºé…ç½®ä¸­çš„æ•°æ®åº“ç«¯ç‚¹
# ä»: original-cluster.cluster-xxx.rds.amazonaws.com
# åˆ°: aurora-graviton4-green.cluster-xxx.rds.amazonaws.com
            </div>

            <h4>4.2 ç›‘æ§å…³é”®æŒ‡æ ‡</h4>
            <ul>
                <li>CPUåˆ©ç”¨ç‡</li>
                <li>å†…å­˜ä½¿ç”¨ç‡</li>
                <li>è¿æ¥æ•°</li>
                <li>æŸ¥è¯¢å»¶è¿Ÿ</li>
                <li>é”™è¯¯ç‡</li>
            </ul>
        </div>

        <h2>ğŸ” æµ‹è¯•éªŒè¯æ¸…å•</h2>
        
        <table>
            <thead>
                <tr>
                    <th>æµ‹è¯•é˜¶æ®µ</th>
                    <th>æµ‹è¯•é¡¹ç›®</th>
                    <th>éªŒæ”¶æ ‡å‡†</th>
                    <th>å®ŒæˆçŠ¶æ€</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="3">åŠŸèƒ½æµ‹è¯•</td>
                    <td>åº”ç”¨è¿æ¥æ€§</td>
                    <td>æ‰€æœ‰åº”ç”¨æ­£å¸¸è¿æ¥</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td>æ•°æ®ä¸€è‡´æ€§</td>
                    <td>æ•°æ®å®Œæ•´æ— è¯¯</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td>ä¸šåŠ¡æµç¨‹</td>
                    <td>å…³é”®ä¸šåŠ¡æ­£å¸¸</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td rowspan="3">æ€§èƒ½æµ‹è¯•</td>
                    <td>æŸ¥è¯¢æ€§èƒ½</td>
                    <td>æ€§èƒ½æå‡15-25%</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td>å¹¶å‘å¤„ç†</td>
                    <td>å¹¶å‘èƒ½åŠ›ä¸é™ä½</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td>èµ„æºåˆ©ç”¨</td>
                    <td>CPU/å†…å­˜ä¼˜åŒ–</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td rowspan="2">ç¨³å®šæ€§æµ‹è¯•</td>
                    <td>é•¿æ—¶é—´è¿è¡Œ</td>
                    <td>24å°æ—¶ç¨³å®šè¿è¡Œ</td>
                    <td>â–¡</td>
                </tr>
                <tr>
                    <td>æ•…éšœæ¢å¤</td>
                    <td>æ•…éšœè½¬ç§»æ­£å¸¸</td>
                    <td>â–¡</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸš¨ å›æ»šæ–¹æ¡ˆ</h2>
        
        <div class="warning-box">
            <h3>ç´§æ€¥å›æ»šæ­¥éª¤</h3>
            <ol>
                <li><strong>ç«‹å³åˆ‡æ¢ï¼š</strong>å°†åº”ç”¨ç¨‹åºç«¯ç‚¹åˆ‡å›åŸé›†ç¾¤</li>
                <li><strong>éªŒè¯æœåŠ¡ï¼š</strong>ç¡®è®¤æ‰€æœ‰æœåŠ¡æ¢å¤æ­£å¸¸</li>
                <li><strong>æ•°æ®åŒæ­¥ï¼š</strong>å¦‚æœ‰å¿…è¦ï¼ŒåŒæ­¥åˆ‡æ¢æœŸé—´çš„æ•°æ®å˜æ›´</li>
                <li><strong>é—®é¢˜åˆ†æï¼š</strong>åˆ†æå‡çº§å¤±è´¥åŸå› </li>
            </ol>
        </div>

        <div class="code-block">
# å¿«é€Ÿå›æ»šå‘½ä»¤
# 1. æ›´æ–°åº”ç”¨é…ç½®
# 2. é‡å¯åº”ç”¨æœåŠ¡
# 3. éªŒè¯è¿æ¥
aws rds describe-db-clusters --db-cluster-identifier original-cluster
        </div>

        <h2>ğŸ“ˆ é¢„æœŸæ”¶ç›Š</h2>
        
        <div class="success-box">
            <h3>âœ… å‡çº§åé¢„æœŸæ”¶ç›Š</h3>
            <ul>
                <li><strong>æ€§èƒ½æå‡ï¼š</strong>15-25%çš„æŸ¥è¯¢æ€§èƒ½æ”¹å–„</li>
                <li><strong>æˆæœ¬ä¼˜åŒ–ï¼š</strong>ç›¸åŒæ€§èƒ½ä¸‹æˆæœ¬é™ä½10-20%</li>
                <li><strong>èƒ½æ•ˆæå‡ï¼š</strong>æ›´å¥½çš„èƒ½æºæ•ˆç‡</li>
                <li><strong>æœªæ¥å…¼å®¹ï¼š</strong>æ”¯æŒæœ€æ–°AWSåŠŸèƒ½</li>
            </ul>
        </div>

        <h2>ğŸ“ æ”¯æŒèµ„æº</h2>
        
        <ul>
            <li><a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-mysql-blue-green-deployments.html">Auroraè“ç»¿éƒ¨ç½²å®˜æ–¹æ–‡æ¡£</a></li>
            <li><a href="https://aws.amazon.com/cn/blogs/china/q-cli-helps-intsig-achieve-aurora-upgrade-and-operations/">Q CLI Auroraå‡çº§å®è·µ</a></li>
            <li><a href="https://aws.amazon.com/rds/aurora/graviton/">Gravitonå¤„ç†å™¨ä¼˜åŠ¿</a></li>
        </ul>

        <div class="recommendation-box">
            <h3>ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h3>
            <ul>
                <li>åœ¨éç”Ÿäº§ç¯å¢ƒå…ˆè¿›è¡Œå®Œæ•´æµ‹è¯•</li>
                <li>é€‰æ‹©ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œå‡çº§</li>
                <li>å‡†å¤‡è¯¦ç»†çš„å›æ»šè®¡åˆ’</li>
                <li>å‡çº§åæŒç»­ç›‘æ§æ€§èƒ½æŒ‡æ ‡</li>
                <li>é€æ­¥è¿ç§»ï¼Œé™ä½é£é™©</li>
            </ul>
        </div>
    </div>
</body>
</html>
