# WebRTC 车联网视频流成本计算

## 使用场景假设

- **车辆数量**: 10,000 台
- **WebRTC 穿透率**: 80%
- **每日使用频率**: 每车主每天连接 4 次
- **每次观看时长**: 1 分钟
- **摄像头数量**: 8 路

## 成本计算明细

### a) Signaling Channel 固定费用

每个 channel 每月固定费用: **0.12854 CNY**

```
8 (摄像头) × 0.12854 (CNY) = 1.02832 CNY/月/车
```

### b) Signaling Messages 费用

- 每次 WebRTC P2P 视频流建立平均需要: **30 个 signaling messages**
- Signaling Message 价格: **12.05056 CNY/100万个讯息**

```
8 (摄像头) × 30 (讯息) × 4 (每日观看数) × 30 (天) × 12.05056 (CNY) / 1,000,000
= 0.347056128 CNY/月/车
```

### c) TURN Relay 费用

- 穿透失败率: **20%** (需使用 TURN Relay)
- TURN 视频流费用: **1.28539 CNY/1000分钟**

```
8 (摄像头) × 4 (每日观看次数) × 1 (分钟) × 30 (天) × 0.2 (Relay) × 1.28539 (CNY) / 1,000
= 0.246542 CNY/月/车
```

## 总成本汇总

### 单车月度成本

```
a + b + c = 1.02832 + 0.347056128 + 0.246542
         = 1.621918128 CNY/月/车
```

### 10,000 台车总成本

| 周期 | 计算公式 | 总费用 (CNY) |
|------|---------|-------------|
| **月度** | 1.621918128 × 10,000 | **16,219.18** |
| **年度** | 16,219.18 × 12 | **194,630.18** |

## 成本构成占比

| 项目 | 月度成本/车 (CNY) | 占比 |
|------|------------------|------|
| Signaling Channel 固定费用 | 1.02832 | 63.4% |
| Signaling Messages | 0.347056128 | 21.4% |
| TURN Relay | 0.246542 | 15.2% |
| **合计** | **1.621918128** | **100%** |

---

*计算日期: 2025年*  
*注: 实际费用可能因使用情况和价格调整而有所变化*
